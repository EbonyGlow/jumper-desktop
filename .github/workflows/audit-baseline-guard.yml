name: Audit Baseline Guard

on:
  workflow_dispatch:
  push:
    paths:
      - "run-runtime-release-check.sh"
      - "run-runtime-update.sh"
      - "engine/runtime-assets/validate-runtime-install.sh"
      - ".github/workflows/m3-gate-runtime-evidence.yml"
      - "flutter/packages/jumper_sdk_platform/macos/Classes/JumperSdkPlatformPlugin.swift"
      - "audit-baseline-guard.sh"
      - ".github/workflows/audit-baseline-guard.yml"

jobs:
  guard:
    runs-on: ubuntu-22.04
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Make guard executable
        run: chmod +x audit-baseline-guard.sh

      - name: Run audit baseline guard
        run: ./audit-baseline-guard.sh
